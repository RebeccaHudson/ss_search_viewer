{% load staticfiles %}
<head>
  <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="{% static 'ss_viewer/style.css' %}" />

  <title>atsnp data</title>
  <link href="{% static 'ss_viewer/css/bootstrap.min.css' %}" rel="stylesheet">

</head>
<body>

<div class="container">
<div id="content">

<h1> specify genomic location OR snpid OR transcription factor</h1>
<div id="status_message"> {{ status_message }} </div>


<ul id="tabs" class="nav nav-tabs", data-tabs="tabs">
  <li class="active"><a href="#gl_region_search_form" data-toggle="tab">Genomic Location</a></li>
  <li><a href="#snpid_search_form" data-toggle="tab">SNPid</a></li>
  <li><a href="#tf_search_form" data-toggle="tab" >Transcription Factor</a></li>
</ul>

<div class="side">

<div id="tabbed-forms" class="tab-content">

<div class="tab-pane active" id="gl_region_search_form" >
  <form role="form" enctype="multipart/form-data" action="{% url 'ss_viewer:gl-region-search' %}" method="post" >
  {% csrf_token %}
  <div class="form-group">
    <table>
      {{ gl_search_form.as_table }}
    </table>
    <input type="submit" value="Search by Genomic Location"  class="btn btn-primary" />
  </div>
  </form>
</div>


<div class="tab-pane" id="snpid_search_form" >
  <form role="form" enctype="multipart/form-data" action="{% url 'ss_viewer:snpid-search' %}" method="post">
  {% csrf_token %}
  <div class="form-group">
    <table>
      {{ snpid_search_form.as_table }}
    </table>
    <input type="submit" value="Search by SNPid"  class="btn btn-primary" />
  </div>
  </form>
</div>


<div class="tab-pane" id="tf_search_form" >
  <form role="form" enctype="multipart/form-data" action="{% url 'ss_viewer:trans-factor-search' %}" method="post">
  {% csrf_token %}
    <div class="form-group">
      <table>
        {{ tf_search_form.as_table }}
      </table>
      <input type="submit" value="Search by Transcription Factor"  class="btn btn-primary" />
    </div>
  </form>
</div>

 
</div> <!-- close the 'side' div -->

</div> <!-- close the 'tabbed forms' div -->
<!--  this is the way that we will be displaying the plot -->
<div id="plot" class="side">
</div>


<!-- consider making this part modular; DRYing it up some how... -->
<div id="scores_to_view">
  {% if api_response  %}
  <table> 
    <tr>
        <td>chromosome</td><td>pos</td>
        <td>snpid</td><td>transcription factor</td><td>motif length</td>
        <td>pval rank</td>
        <td>snp start</td><td>snp end</td><td>ref start</td><td>ref end</td>
        <td>log lik ref</td> <td> log lik ratio </td>
        <td>log enhance odds</td> <td>log reduce odds</td>
        <td>log lik snp</td>  
        <td> snp strand </td>  <td> ref strand </td>
        <td>pval ref</td><td>pval snp</td><td>pval cond ref</td>
        <td>pval cond snp</td><td>pval diff</td>
    </tr>
    {% for onerow in api_response %}
    <tr>   
        <td>{{ onerow.chr }}</td><td>{{ onerow.pos }}</td> 
        <td>{{ onerow.snpid }}</td><td> {{ onerow.trans_factor }}</td>
        <td>{{ onerow.motif_len}}</td>
        <td>  {{ onerow.pval_rank|floatformat:4 }} </td>
        <td>{{ onerow.snp_start}} </td><td>{{ onerow.snp_end}}</td><td>{{ onerow.ref_start}}</td>
        <td>{{ onerow.ref_end }} </td>
         <td>{{ onerow.log_lik_ref|floatformat:4 }} </td><td> {{ onerow.log_lik_ratio|floatformat:4}} </td>
        <td>{{ onerow.log_enhance_odds|floatformat:4}}</td><td>{{onerow.log_reduce_odds|floatformat:4}} </td>
        <td>{{ onerow.log_lik_snp|floatformat:4}} </td>  
        <td>{{ onerow.snp_strand }}</td>  <td>{{ onerow.ref_strand }}</td>
        <td>{{ onerow.pval_ref|floatformat:4 }} </td><td>{{ onerow.pval_snp|floatformat:4 }} </td>
        <td>{{ onerow.pval_cond_ref|floatformat:4 }}</td> <td>{{ onerow.pval_cond_snp|floatformat:4}}</td>
        <td>{{ onerow.pval_diff|floatformat:4 }}</td>    </tr>
    {%  endfor %}
  </table>
  {% endif %}
</div>


</div> <!-- close the 'content' div -->
</div> <!-- close the 'container' div -->

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="{% static 'ss_viewer/js/bootstrap.min.js' %}"></script>



<script type="text/javascript">
    jQuery(document).ready(function ($) {
        $('#tabs').tab();
    });
</script>   



</body>
